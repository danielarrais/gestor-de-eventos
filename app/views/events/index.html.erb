<div class="clearfix">
  <div class="float-left">
    <%= page_title('Eventos') %>
  </div>
  <div class="float-right pt-2">
    <%= icon_link 'Cadastrar', 'plus', new_event_path %>
  </div>
  <div class="float-right pt-2 mr-4">
    <%= icon_link i18n_word(:filter), 'filter', "#collapseFilter", data: { toggle: 'collapse' },
                  aria: { expanded: "false", controls: "collapseFilter" } %>
  </div>
</div>

<%= card_filter do %>
  filtros
<% end %>

<table class="table">
  <thead>
  <tr class="bg-primary">
    <th class="text-white bold">
      Nome
    </th>
    <th class="text-white bold">
      Situação
    </th>
    <th class="text-white bold">
      Data de Inicio
    </th>
    <th class="text-white bold">
      Data de Encerramento
    </th>
    <th style="width: 1%;" class="text-white text-center bold">
      Ações
    </th>
  </tr>
  </thead>
  <tbody>
  <% @events.each do |event| %>
    <tr>
      <td>
        <%= event.name %>
      </td>
      <td>
        <%= event.situation.situation_description %>
      </td>
      <td>
        <%= event.start_date.strftime('%d/%m/%Y') %>
      </td>
      <td>
        <%= event.closing_date.strftime('%d/%m/%Y') %>
      </td>
      <td class="text-center">
        <%= link_to '<span><i class="fa fa-search"></i></span>'.html_safe, event,
                    class: 'btn btn-primary btn-icon btn-sm btn-simple', title: "Visualizar",
                    data: { toggle: 'tooltip', placement: 'bottom' } if event.can_action?(:show) %>
        <%= link_to '<span><i class="fa fa-list"></i></span>'.html_safe, edit_frequences_path(event: event),
                    class: 'btn btn-icon btn-sm btn-default', title: "Visualizar ou preencher frequência",
                    data: { toggle: 'tooltip', placement: 'bottom' } if event.can_action?(:edit_frequences) %>
        <%= link_to '<span><i class="fa fa-certificate "></i></span>'.html_safe, release_issuing_certificates_event_path(event),
                    class: 'btn btn-icon btn-sm btn-success', remote: true,
                    data: { toggle: 'tooltip', placement: 'bottom', confirm: 'Você tem certeza?' },
                    title: "Liberar emissão de certificados" if event.can_action?(:release_issuing_certificates) %>
        <%= link_to '<span><i class="fa fa-edit"></i></span>'.html_safe, edit_event_path(event),
                    class: 'btn btn-icon btn-sm btn-primary',
                    data: { toggle: 'tooltip', placement: 'bottom' }, title: "Editar" if event.can_action?(:edit) %>
        <%= link_to '<span><i class="fa fa-trash"></i></span>'.html_safe, event,
                    method: :delete, data: { confirm: 'Você tem certeza?', toggle: 'tooltip', placement: 'bottom' }, title: "Excluir",
                    class: 'btn btn-icon btn-sm btn-danger' if event.can_action?(:destroy) %>
      </td>
    </tr>

  <% end %>
  </tbody>
</table>

<div class="row justify-content-center">
  <%= paginate @events %>
</div>
