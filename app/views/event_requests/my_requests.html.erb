<div class="float-left">
  <%= page_title("Minhas #{i18n_model(:event_request, plural: true)}") %>
</div>
<div class="float-right pt-2">
  <%= icon_link i18n_word(:register), 'plus', new_event_request_path %>
</div>

<table class="table">
  <thead>
  <tr class="bg-primary">
    <th class="text-white bold">
      <%= i18n_model(:event_request, :person_id) %>
    </th>
    <th class="text-white bold">
      <%= i18n_model(:event_request, :event_id) %>
    </th>
    <th class="text-white bold">
      <%= i18n_model(:event_request, :situation) %>
    </th>
    <th class="text-white bold">
      <%= i18n_model(:event, :start_date) %>
    </th>
    <th class="text-white bold">
      <%= i18n_model(:event, :closing_date) %>
    </th>
    <th class="text-white text-center bold" colspan="3"><%= i18n_word(:actions) %></th>
  </tr>
  </thead>

  <tbody>
  <% @event_requests.each do |event_request| %>
    <tr>
      <td>
        <%= event_request.person.full_name %>
      </td>
      <td>
        <%= event_request.event.name %>
      </td>
      <td>
        <%= event_request.situation.situation_description %>
      </td>
      <td>
        <%= event_request.event.start_date.strftime('%d/%m/%Y') %>
      </td>
      <td>
        <%= event_request.event.closing_date.strftime('%d/%m/%Y') %>
      </td>
      <td class="text-center">
        <%= link_to '<span><i class="fa fa-search"></i></span>'.html_safe, event_request,
                    class: 'btn btn-primary btn-icon btn-sm btn-simple' %>
        <%= link_to '<span><i class="fa fa-edit"></i></span>'.html_safe, edit_event_request_path(event_request),
                    class: 'btn btn-icon btn-sm btn-warning' %>
        <%= link_to '<span><i class="fa fa-trash"></i></span>'.html_safe, event_request,
                    method: :delete, data: { confirm: 'Confirma a exclusão?' },
                    class: 'btn btn-icon btn-sm btn-danger' unless event_request.forwarded? %>
        <%= link_to '<span><i class="fa fa-paper-plane"></i></span>'.html_safe, forward_the_request_event_request_path(event_request),
                    data: { confirm: 'Enviar solitação de evento?' },
                    class: 'btn btn-icon btn-sm btn-primary' unless event_request.forwarded? %>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>

<div class="row justify-content-center">
  <%= paginate @event_requests %>
</div>
